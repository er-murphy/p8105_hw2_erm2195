P8105 Homework 2
================
2023-10-02

# Problem 1

Goal: merging the FiveThirtyEight `pols-month.csv`, `unemployment.csv`,
and `snp.csv` data into a single data frame using year and month as keys
across datasets.

## Loading Libraries

First, loading the `tidyverse` library for use throughout the homework.

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Cleaning `pols-month` Data

Now, cleaning the data in `pols-month.csv`:

- Using separate() to break up the variable `mon` into integer variables
  `year`, `month`, and `day`
- Replacing month number with month name
- Creating a `president` variable taking values “gop” and “dem”
- Removing `prez_dem` and `prez_gop` variables
- Removing the `day` variable

``` r
pols = 
  read_csv("Data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day),
    president = ifelse(prez_dem > 0 , "dem", "gop"),
    month = case_match(month,
      1 ~ "January",
      2 ~ "February",
      3 ~ "March",
      4 ~ "April",
      5 ~ "May",
      6 ~ "June",
      7 ~ "July",
      8 ~ "August",
      9 ~ "September",
      10 ~ "October",
      11 ~ "November",
      12 ~ "December")
  ) |> 
  select(-starts_with("prez"), -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Cleaning `snp` Data

Second, cleaning the data in `snp.csv` using a similar process:

- Using separate() to break up the variable `date` into integer
  variables `year`, `month`, and `day`
- Converting the `year` variable into a 4 digit value
- Replacing month number with month name
- Reorganizing so that year and month are the leading columns
- Removing the `day` variable

``` r
snp = 
  read_csv("Data/snp.csv") |> 
  janitor::clean_names() |> 
  separate(date, into = c("month", "day", "year"), sep = "/") |> 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day),
    year = ifelse(as.integer(year) < 24, as.integer(year) + 2000, as.integer(year) + 1900),
    month = case_match(month,
      1 ~ "January",
      2 ~ "February",
      3 ~ "March",
      4 ~ "April",
      5 ~ "May",
      6 ~ "June",
      7 ~ "July",
      8 ~ "August",
      9 ~ "September",
      10 ~ "October",
      11 ~ "November",
      12 ~ "December")
  ) |> 
  select(year, month, close)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Cleaning `unemployment` Data

Third, tidying the data in `unemployment.csv` so that it can be merged
with the other two datasets:

- Switch from “wide” to “long” format - turn months into a single
  column, and the value of existing `months` column into a column called
  `percent_unemployment`
- Converting month names to capitalized full names to match the format
  of other datasets

``` r
unemployment = 
  read_csv("Data/unemployment.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(jan:dec, names_to = "month", values_to = "percent_unemployment") |> 
  mutate(
    month = case_match(month,
    "jan" ~ "January",
    "feb" ~ "February",
    "mar" ~ "March",
    "apr" ~ "April",
    "may" ~ "May",
    "jun" ~ "June",
    "jul" ~ "July",
    "aug" ~ "August",
    "sep" ~ "September",
    "oct" ~ "October",
    "nov" ~ "November",
    "dec" ~ "December")
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Merging the Data Sets

Joining the datasets by merging `snp` into `pols`, and then merging
`unemployment` into the result. The resulting dataset is called
`data_538`

``` r
data_538 = left_join(pols, snp) |> 
  left_join(x = _, y = unemployment)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

``` r
str(data_538)
```

    ## tibble [822 × 11] (S3: tbl_df/tbl/data.frame)
    ##  $ year                : num [1:822] 1947 1947 1947 1947 1947 ...
    ##  $ month               : chr [1:822] "January" "February" "March" "April" ...
    ##  $ gov_gop             : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_gop             : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
    ##  $ rep_gop             : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
    ##  $ gov_dem             : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_dem             : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
    ##  $ rep_dem             : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
    ##  $ president           : chr [1:822] "dem" "dem" "dem" "dem" ...
    ##  $ close               : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ percent_unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...

## Description of the Combined Data Set

The `pols` data has 822 observations and 9 variables and tells us about
the party affiliation distribution (democrat or republican) for
governors and senators in a given year from 1947 to 2015.

USE MR. TRASH WHEEL DATA FOR 2023 FOR HOMEWORK
